// Copyright 2020 The Kubermatic Kubernetes Platform contributors.
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//     http://www.apache.org/licenses/LICENSE-2.0
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

@import '~@angular/material/theming';
@import 'material/theme';
@import 'global/theme';
@import 'component';

@include mat-core();

@mixin theme-new($theme, $colors) {
  $palette-foreground: map-get($theme, foreground);
  $palette-background: map-get($theme, background);

  $color-map: (
    // Palette colors
    palette-foreground: map-get($theme, foreground),
    palette-background: map-get($theme, background),
    // Primary colors
    primary: map-get($colors, primary),
    primary-dark: map-get($colors, primary-dark),
    primary-hover: map-get($colors, primary-hover),
    // Secondary colors
    secondary: map-get($colors, secondary),
    secondary-dark: map-get($colors, secondary-dark),
    // Text colors
    text: mat-color($palette-foreground, text),
    text-secondary: mat-color($palette-foreground, secondary-text),
    text-disabled: mat-color($palette-foreground, disabled-text),
    // Background colors
    background: mat-color($palette-background, background),
    background-primary: map-get($colors, primary),
    background-hover: mat-color($palette-background, hover),
    background-card: mat-color($palette-background, card),
    background-dialog: mat-color($palette-background, dialog),
    background-disabled-button: mat-color($palette-background, disabled-button),
    background-app-bar: mat-color($palette-background, app-bar),
    // Divider colors
    divider: mat-color($palette-foreground, divider),
    divider-disabled: mat-color($palette-foreground, disabled),
    // Indicator colors
    indicator-green: mat-color($colors, indicator-green),
    indicator-red: mat-color($colors, indicator-red),
    indicator-orange: mat-color($colors, indicator-orange),
    // Other colors
    project-switch: rgba(mat-color($palette-foreground, secondary-text), .7),
    checkbox-disabled: mat-color($palette-foreground, disabled-checkbox),
    wizard-step-background: map-get($colors, wizard-step-background),
  );

  // Override default material themes
  @include theme-material-override($color-map);

  // Register global theming rules
  @include theme-global($color-map);

  // Register component-level themes
  @include theme-register-components($color-map);
}
